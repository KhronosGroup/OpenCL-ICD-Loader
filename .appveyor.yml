os:
  - Visual Studio 2017
  - Visual Studio 2019

platform:
  - Win32
  - x64

configuration:
  - Debug
  - Release

before_build:
  - git clone https://github.com/MathiasMagnus/OpenCL-Headers --branch pkgconfig --single-branch
  - cd OpenCL-Headers
  - mkdir build
  - mkdir install
  - cd build
  - cmake -A %PLATFORM%
          -D CMAKE_INSTALL_PREFIX=../install
          ..
  - cmake --build .
          --target INSTALL
  - cd ..\..\
  - git clone https://github.com/MathiasMagnus/OpenCL-ICD-Loader --branch pkgconfig --single-branch
  - cd OpenCL-Headers
  - mkdir build
  - mkdir install
  - cd build
  - cmake -A %PLATFORM%
          -D CMAKE_INSTALL_PREFIX=../install
          -D CMAKE_PREFIX_PATH=../../OpenCL-Headers/install
          ..

build:
  project: build\OpenCL-ICD-Loader.sln
  parallel: true
  verbosity: minimal
